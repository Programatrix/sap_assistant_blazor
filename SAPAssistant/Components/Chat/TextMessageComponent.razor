@using SAPAssistant.Models.Chat
@using SAPAssistant.Service.Interfaces
@inject INotificationService NotificationService

<div class="chat-message @(M.IsUser ? "user" : "assistant")">
    <div class="message-content">
        @M.Mensaje
    </div>

    @if (!M.IsUser)
    {
        <div class="message-actions">
            <SAPAssistant.Components.Shared.CopyButton Text="@M.Mensaje" />
            <button @onclick="() => RateMessage(true)">👍</button>
            <button @onclick="() => RateMessage(false)">👎</button>
        </div>
    }
</div>

@code {
    [Parameter] public MessageBase Message { get; set; }
    private TextMessage M => (TextMessage)Message;

    private async Task RateMessage(bool isPositive)
    {
        if (isPositive)
        {
            await NotificationService.NotifySuccess("Valorado como: 👍");
        }
        else
        {
            await NotificationService.NotifyError("Valorado como: 👎");
        }
    }
}
